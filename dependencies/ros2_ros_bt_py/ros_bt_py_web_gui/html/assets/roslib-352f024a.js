var er=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vr(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}function Dr(p){if(p.__esModule)return p;var s=p.default;if(typeof s=="function"){var a=function r(){return this instanceof r?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};a.prototype=s.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(p).forEach(function(r){var o=Object.getOwnPropertyDescriptor(p,r);Object.defineProperty(a,r,o.get?o:{enumerable:!0,get:function(){return p[r]}})}),a}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var ut=Object.getOwnPropertySymbols,pr=Object.prototype.hasOwnProperty,mr=Object.prototype.propertyIsEnumerable;function dr(p){if(p==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(p)}function yr(){try{if(!Object.assign)return!1;var p=new String("abc");if(p[5]="de",Object.getOwnPropertyNames(p)[0]==="5")return!1;for(var s={},a=0;a<10;a++)s["_"+String.fromCharCode(a)]=a;var r=Object.getOwnPropertyNames(s).map(function(h){return s[h]});if(r.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(h){o[h]=h}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var K=yr()?Object.assign:function(p,s){for(var a,r=dr(p),o,h=1;h<arguments.length;h++){a=Object(arguments[h]);for(var S in a)pr.call(a,S)&&(r[S]=a[S]);if(ut){o=ut(a);for(var y=0;y<o.length;y++)mr.call(a,o[y])&&(r[o[y]]=a[o[y]])}}return r},pe={exports:{}},me,ct;function st(){return ct||(ct=1,me=function(p,s,a){s.forEach(function(r){var o=a[r];p.prototype[r]=function(h){return h.ros=this,new o(h)}})}),me}var de,ft;function tr(){return ft||(ft=1,de=typeof window<"u"?window.WebSocket:WebSocket),de}var ye,lt;function gr(){if(lt)return ye;lt=1;var p=arguments[3],s=arguments[4],a=arguments[5],r=JSON.stringify;return ye=function(o,h){for(var S,y=Object.keys(a),d=0,v=y.length;d<v;d++){var i=y[d],n=a[i].exports;if(n===o||n&&n.default===o){S=i;break}}if(!S){S=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var f={},d=0,v=y.length;d<v;d++){var i=y[d];f[i]=i}s[S]=["function(require,module,exports){"+o+"(self); }",f]}var c=Math.floor(Math.pow(16,8)*Math.random()).toString(16),T={};T[S]=S,s[c]=["function(require,module,exports){var f = require("+r(S)+");(f.default ? f.default : f)(self);}",T];var O={};A(c);function A(I){O[I]=!0;for(var Q in s[I][1]){var Y=s[I][1][Q];O[Y]||A(Y)}}var L="("+p+")({"+Object.keys(O).map(function(I){return r(I)+":["+s[I][0]+","+r(s[I][1])+"]"}).join(",")+"},{},["+r(c)+"])",M=window.URL||window.webkitURL||window.mozURL||window.msURL,U=new Blob([L],{type:"text/javascript"});if(h&&h.bare)return U;var N=M.createObjectURL(U),G=new Worker(N);return G.objectURL=N,G},ye}var ge={exports:{}},ht;function wr(){return ht||(ht=1,function(p){function s(v){var i={};function n(c){if(i[c])return i[c].exports;var T=i[c]={i:c,l:!1,exports:{}};return v[c].call(T.exports,T,T.exports,n),T.l=!0,T.exports}n.m=v,n.c=i,n.i=function(c){return c},n.d=function(c,T,O){n.o(c,T)||Object.defineProperty(c,T,{configurable:!1,enumerable:!0,get:O})},n.r=function(c){Object.defineProperty(c,"__esModule",{value:!0})},n.n=function(c){var T=c&&c.__esModule?function(){return c.default}:function(){return c};return n.d(T,"a",T),T},n.o=function(c,T){return Object.prototype.hasOwnProperty.call(c,T)},n.p="/",n.oe=function(c){throw console.error(c),c};var f=n(n.s=ENTRY_MODULE);return f.default||f}var a="[\\.|\\-|\\+|\\w|/|@]+",r="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+a+").*?\\)";function o(v){return(v+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function h(v){return!isNaN(1*v)}function S(v,i,n){var f={};f[n]=[];var c=i.toString(),T=c.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!T)return f;for(var O=T[1],A=new RegExp("(\\\\n|\\W)"+o(O)+r,"g"),L;L=A.exec(c);)L[3]!=="dll-reference"&&f[n].push(L[3]);for(A=new RegExp("\\("+o(O)+'\\("(dll-reference\\s('+a+'))"\\)\\)'+r,"g");L=A.exec(c);)v[L[2]]||(f[n].push(L[1]),v[L[2]]=__webpack_require__(L[1]).m),f[L[2]]=f[L[2]]||[],f[L[2]].push(L[4]);for(var M=Object.keys(f),U=0;U<M.length;U++)for(var N=0;N<f[M[U]].length;N++)h(f[M[U]][N])&&(f[M[U]][N]=1*f[M[U]][N]);return f}function y(v){var i=Object.keys(v);return i.reduce(function(n,f){return n||v[f].length>0},!1)}function d(v,i){for(var n={main:[i]},f={main:[]},c={main:{}};y(n);)for(var T=Object.keys(n),O=0;O<T.length;O++){var A=T[O],L=n[A],M=L.pop();if(c[A]=c[A]||{},!(c[A][M]||!v[A][M])){c[A][M]=!0,f[A]=f[A]||[],f[A].push(M);for(var U=S(v,v[A][M],A),N=Object.keys(U),G=0;G<N.length;G++)n[N[G]]=n[N[G]]||[],n[N[G]]=n[N[G]].concat(U[N[G]])}}return f}p.exports=function(v,i){i=i||{};var n={main:__webpack_modules__},f=i.all?{main:Object.keys(n.main)}:d(n,v),c="";Object.keys(f).filter(function(M){return M!=="main"}).forEach(function(M){for(var U=0;f[M][U];)U++;f[M].push(U),n[M][U]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",c=c+"var "+M+" = ("+s.toString().replace("ENTRY_MODULE",JSON.stringify(U))+")({"+f[M].map(function(N){return""+JSON.stringify(N)+": "+n[M][N].toString()}).join(",")+`});
`}),c=c+"new (("+s.toString().replace("ENTRY_MODULE",JSON.stringify(v))+")({"+f.main.map(function(M){return""+JSON.stringify(M)+": "+n.main[M].toString()}).join(",")+"}))(self);";var T=new window.Blob([c],{type:"text/javascript"});if(i.bare)return T;var O=window.URL||window.webkitURL||window.mozURL||window.msURL,A=O.createObjectURL(T),L=new window.Worker(A);return L.objectURL=A,L}}(ge)),ge.exports}var we,vt;function _r(){if(vt)return we;vt=1;var p=p||tr();return we=function(s){var a=null;function r(h){var S=h.data;S instanceof ArrayBuffer?s.postMessage(S,[S]):s.postMessage(S)}function o(h){s.postMessage({type:h.type})}s.addEventListener("message",function(h){var S=h.data;if(typeof S=="string")a.send(S);else if(S.hasOwnProperty("close"))a.close(),a=null;else if(S.hasOwnProperty("uri")){var y=S.uri;a=new p(y),a.binaryType="arraybuffer",a.onmessage=r,a.onclose=o,a.onopen=o,a.onerror=o}else throw"Unknown message to WorkerSocket"})},we}var _e,pt;function br(){if(pt)return _e;pt=1;try{var p=gr()}catch{var p=wr()}var s=_r();function a(r){this.socket_=p(s),this.socket_.addEventListener("message",this.handleWorkerMessage_.bind(this)),this.socket_.postMessage({uri:r})}return a.prototype.handleWorkerMessage_=function(r){var o=r.data;if(o instanceof ArrayBuffer||typeof o=="string")this.onmessage(r);else{var h=o.type;if(h==="close")this.onclose(null);else if(h==="open")this.onopen(null);else if(h==="error")this.onerror(null);else throw"Unknown message from workersocket"}},a.prototype.send=function(r){this.socket_.postMessage(r)},a.prototype.close=function(){this.socket_.postMessage({close:!0})},_e=a,_e}var be,mt;function xr(){return mt||(mt=1,be=function(){return document.createElement("canvas")}),be}var xe,dt;function Tr(){if(dt)return xe;dt=1;var p=xr(),s=p.Image||window.Image;function a(r,o){var h=new s;h.onload=function(){var S=new p,y=S.getContext("2d");S.width=h.width,S.height=h.height,y.imageSmoothingEnabled=!1,y.webkitImageSmoothingEnabled=!1,y.mozImageSmoothingEnabled=!1,y.drawImage(h,0,0);for(var d=y.getImageData(0,0,h.width,h.height).data,v="",i=0;i<d.length;i+=4)v+=String.fromCharCode(d[i],d[i+1],d[i+2]);o(JSON.parse(v))},h.src="data:image/png;base64,"+r}return xe=a,xe}var Te={exports:{}},yt;function Sr(){return yt||(yt=1,function(p){(function(s,a){var r=Math.pow(2,-24),o=Math.pow(2,32),h=Math.pow(2,53);function S(v){var i=new ArrayBuffer(256),n=new DataView(i),f,c=0;function T(k){for(var q=i.byteLength,E=c+k;q<E;)q*=2;if(q!==i.byteLength){var C=n;i=new ArrayBuffer(q),n=new DataView(i);for(var R=c+3>>2,P=0;P<R;++P)n.setUint32(P*4,C.getUint32(P*4))}return f=k,n}function O(){c+=f}function A(k){O(T(8).setFloat64(c,k))}function L(k){O(T(1).setUint8(c,k))}function M(k){for(var q=T(k.length),E=0;E<k.length;++E)q.setUint8(c+E,k[E]);O()}function U(k){O(T(2).setUint16(c,k))}function N(k){O(T(4).setUint32(c,k))}function G(k){var q=k%o,E=(k-q)/o,C=T(8);C.setUint32(c,E),C.setUint32(c+4,q),O()}function I(k,q){q<24?L(k<<5|q):q<256?(L(k<<5|24),L(q)):q<65536?(L(k<<5|25),U(q)):q<4294967296?(L(k<<5|26),N(q)):(L(k<<5|27),G(q))}function Q(k){var q;if(k===!1)return L(244);if(k===!0)return L(245);if(k===null)return L(246);if(k===a)return L(247);switch(typeof k){case"number":if(Math.floor(k)===k){if(0<=k&&k<=h)return I(0,k);if(-h<=k&&k<0)return I(1,-(k+1))}return L(251),A(k);case"string":var E=[];for(q=0;q<k.length;++q){var C=k.charCodeAt(q);C<128?E.push(C):C<2048?(E.push(192|C>>6),E.push(128|C&63)):C<55296?(E.push(224|C>>12),E.push(128|C>>6&63),E.push(128|C&63)):(C=(C&1023)<<10,C|=k.charCodeAt(++q)&1023,C+=65536,E.push(240|C>>18),E.push(128|C>>12&63),E.push(128|C>>6&63),E.push(128|C&63))}return I(3,E.length),M(E);default:var R;if(Array.isArray(k))for(R=k.length,I(4,R),q=0;q<R;++q)Q(k[q]);else if(k instanceof Uint8Array)I(2,k.length),M(k);else{var P=Object.keys(k);for(R=P.length,I(5,R),q=0;q<R;++q){var j=P[q];Q(j),Q(k[j])}}}}if(Q(v),"slice"in i)return i.slice(0,c);for(var Y=new ArrayBuffer(c),z=new DataView(Y),H=0;H<c;++H)z.setUint8(H,n.getUint8(H));return Y}function y(v,i,n){var f=new DataView(v),c=0;typeof i!="function"&&(i=function(E){return E}),typeof n!="function"&&(n=function(){return a});function T(E,C){return c+=C,E}function O(E){return T(new Uint8Array(v,c,E),E)}function A(){var E=new ArrayBuffer(4),C=new DataView(E),R=N(),P=R&32768,j=R&31744,e=R&1023;if(j===31744)j=261120;else if(j!==0)j+=127-15<<10;else if(e!==0)return e*r;return C.setUint32(0,P<<16|j<<13|e<<13),C.getFloat32(0)}function L(){return T(f.getFloat32(c),4)}function M(){return T(f.getFloat64(c),8)}function U(){return T(f.getUint8(c),1)}function N(){return T(f.getUint16(c),2)}function G(){return T(f.getUint32(c),4)}function I(){return G()*o+G()}function Q(){return f.getUint8(c)!==255?!1:(c+=1,!0)}function Y(E){if(E<24)return E;if(E===24)return U();if(E===25)return N();if(E===26)return G();if(E===27)return I();if(E===31)return-1;throw"Invalid length encoding"}function z(E){var C=U();if(C===255)return-1;var R=Y(C&31);if(R<0||C>>5!==E)throw"Invalid indefinite length element";return R}function H(E,C){for(var R=0;R<C;++R){var P=U();P&128&&(P<224?(P=(P&31)<<6|U()&63,C-=1):P<240?(P=(P&15)<<12|(U()&63)<<6|U()&63,C-=2):(P=(P&15)<<18|(U()&63)<<12|(U()&63)<<6|U()&63,C-=3)),P<65536?E.push(P):(P-=65536,E.push(55296|P>>10),E.push(56320|P&1023))}}function k(){var E=U(),C=E>>5,R=E&31,P,j;if(C===7)switch(R){case 25:return A();case 26:return L();case 27:return M()}if(j=Y(R),j<0&&(C<2||6<C))throw"Invalid length";switch(C){case 0:return j;case 1:return-1-j;case 2:if(j<0){for(var e=[],t=0;(j=z(C))>=0;)t+=j,e.push(O(j));var u=new Uint8Array(t),l=0;for(P=0;P<e.length;++P)u.set(e[P],l),l+=e[P].length;return u}return O(j);case 3:var m=[];if(j<0)for(;(j=z(C))>=0;)H(m,j);else H(m,j);return String.fromCharCode.apply(null,m);case 4:var g;if(j<0)for(g=[];!Q();)g.push(k());else for(g=new Array(j),P=0;P<j;++P)g[P]=k();return g;case 5:var w={};for(P=0;P<j||j<0&&!Q();++P){var x=k();w[x]=k()}return w;case 6:return i(k(),j);case 7:switch(j){case 20:return!1;case 21:return!0;case 22:return null;case 23:return a;default:return n(j)}}}var q=k();if(c!==v.byteLength)throw"Remaining bytes";return q}var d={encode:S,decode:y};typeof a=="function"&&a.amd?a("cbor/cbor",d):p.exports?p.exports=d:s.CBOR||(s.CBOR=d)})(er)}(Te)),Te.exports}var Se={exports:{}},gt;function Rr(){return gt||(gt=1,function(p){var s=Math.pow(2,32),a=!1;function r(){a||(a=!0,console.warn("CBOR 64-bit integer array values may lose precision. No further warnings."))}function o(i){r();for(var n=i.byteLength,f=i.byteOffset,c=n/8,T=i.buffer.slice(f,f+n),O=new Uint32Array(T),A=new Array(c),L=0;L<c;L++){var M=L*2,U=O[M],N=O[M+1];A[L]=U+s*N}return A}function h(i){r();for(var n=i.byteLength,f=i.byteOffset,c=n/8,T=i.buffer.slice(f,f+n),O=new Uint32Array(T),A=new Int32Array(T),L=new Array(c),M=0;M<c;M++){var U=M*2,N=O[U],G=A[U+1];L[M]=N+s*G}return L}function S(i,n){var f=i.byteLength,c=i.byteOffset,T=i.buffer.slice(c,c+f);return new n(T)}var y={64:Uint8Array,69:Uint16Array,70:Uint32Array,72:Int8Array,77:Int16Array,78:Int32Array,85:Float32Array,86:Float64Array},d={71:o,79:h};function v(i,n){if(n in y){var f=y[n];return S(i,f)}return n in d?d[n](i):i}p.exports&&(p.exports=v)}(Se)),Se.exports}var Re,wt;function Lr(){if(wt)return Re;wt=1;var p=Tr(),s=Sr(),a=Rr(),r=null;typeof bson<"u"&&(r=bson().BSON);function o(h){var S=null;h.transportOptions.decoder&&(S=h.transportOptions.decoder);function y(i){i.op==="publish"?h.emit(i.topic,i.msg):i.op==="service_response"?h.emit(i.id,i):i.op==="call_service"?h.emit(i.service,i):i.op==="status"&&(i.id?h.emit("status:"+i.id,i):h.emit("status",i))}function d(i,n){i.op==="png"?p(i.data,n):n(i)}function v(i,n){if(!r)throw"Cannot process BSON encoded message without BSON header.";var f=new FileReader;f.onload=function(){var c=new Uint8Array(this.result),T=r.deserialize(c);n(T)},f.readAsArrayBuffer(i)}return{onopen:function(n){h.isConnected=!0,h.emit("connection",n)},onclose:function(n){h.isConnected=!1,h.emit("close",n)},onerror:function(n){h.emit("error",n)},onmessage:function(n){if(S)S(n.data,function(T){y(T)});else if(typeof Blob<"u"&&n.data instanceof Blob)v(n.data,function(T){d(T,y)});else if(n.data instanceof ArrayBuffer){var f=s.decode(n.data,a);y(f)}else{var c=JSON.parse(typeof n=="string"?n:n.data);d(c,y)}}}}return Re=o,Re}var Le,_t;function rr(){if(_t)return Le;_t=1;var p=K;function s(a){p(this,a)}return Le=s,Le}var ke,bt;function ne(){if(bt)return ke;bt=1;var p=K;function s(a){p(this,a)}return ke=s,ke}var Me={exports:{}};/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */var xt;function $(){return xt||(xt=1,function(p,s){(function(a){var r=Object.hasOwnProperty,o=Array.isArray?Array.isArray:function(t){return Object.prototype.toString.call(t)==="[object Array]"},h=10,S=typeof process=="object"&&typeof process.nextTick=="function",y=typeof Symbol=="function",d=typeof Reflect=="object",v=typeof setImmediate=="function",i=v?setImmediate:setTimeout,n=y?d&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function f(){this._events={},this._conf&&c.call(this,this._conf)}function c(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==a&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function T(e,t){var u="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(u+=" Event name: "+t+"."),typeof process<"u"&&process.emitWarning){var l=new Error(u);l.name="MaxListenersExceededWarning",l.emitter=this,l.count=e,process.emitWarning(l)}else console.error(u),console.trace&&console.trace()}var O=function(e,t,u){var l=arguments.length;switch(l){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,u];default:for(var m=new Array(l);l--;)m[l]=arguments[l];return m}};function A(e,t){for(var u={},l,m=e.length,g=t?t.length:0,w=0;w<m;w++)l=e[w],u[l]=w<g?t[w]:a;return u}function L(e,t,u){this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0;var l,m;if((u.on||u.off)&&(l=u.on,m=u.off),t.addEventListener?(l=t.addEventListener,m=t.removeEventListener):t.addListener?(l=t.addListener,m=t.removeListener):t.on&&(l=t.on,m=t.off),!l&&!m)throw Error("target does not implement any known event API");if(typeof l!="function")throw TypeError("on method must be a function");if(typeof m!="function")throw TypeError("off method must be a function");this._on=l,this._off=m;var g=e._observers;g?g.push(this):e._observers=[this]}Object.assign(L.prototype,{subscribe:function(e,t,u){var l=this,m=this._target,g=this._emitter,w=this._listeners,x=function(){var _=O.apply(null,arguments),b={data:_,name:t,original:e};if(u){var F=u.call(m,b);F!==!1&&g.emit.apply(g,[b.name].concat(_));return}g.emit.apply(g,[t].concat(_))};if(w[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,g._newListener&&g._removeListener&&!l._onNewListener?(this._onNewListener=function(_){_===t&&w[e]===null&&(w[e]=x,l._on.call(m,e,x))},g.on("newListener",this._onNewListener),this._onRemoveListener=function(_){_===t&&!g.hasListeners(_)&&w[e]&&(w[e]=null,l._off.call(m,e,x))},w[e]=null,g.on("removeListener",this._onRemoveListener)):(w[e]=x,l._on.call(m,e,x))},unsubscribe:function(e){var t=this,u=this._listeners,l=this._emitter,m,g,w=this._off,x=this._target,_;if(e&&typeof e!="string")throw TypeError("event must be a string");function b(){t._onNewListener&&(l.off("newListener",t._onNewListener),l.off("removeListener",t._onRemoveListener),t._onNewListener=null,t._onRemoveListener=null);var F=Y.call(l,t);l._observers.splice(F,1)}if(e){if(m=u[e],!m)return;w.call(x,e,m),delete u[e],--this._listenersCount||b()}else{for(g=n(u),_=g.length;_-- >0;)e=g[_],w.call(x,e,u[e]);this._listeners={},this._listenersCount=0,b()}}});function M(e,t,u,l){var m=Object.assign({},t);if(!e)return m;if(typeof e!="object")throw TypeError("options must be an object");var g=Object.keys(e),w=g.length,x,_,b;function F(D){throw Error('Invalid "'+x+'" option value'+(D?". Reason: "+D:""))}for(var V=0;V<w;V++){if(x=g[V],!l&&!r.call(t,x))throw Error('Unknown "'+x+'" option');_=e[x],_!==a&&(b=u[x],m[x]=b?b(_,F):_)}return m}function U(e,t){return(typeof e!="function"||!e.hasOwnProperty("prototype"))&&t("value must be a constructor"),e}function N(e){var t="value must be type of "+e.join("|"),u=e.length,l=e[0],m=e[1];return u===1?function(g,w){if(typeof g===l)return g;w(t)}:u===2?function(g,w){var x=typeof g;if(x===l||x===m)return g;w(t)}:function(g,w){for(var x=typeof g,_=u;_-- >0;)if(x===e[_])return g;w(t)}}var G=N(["function"]),I=N(["object","function"]);function Q(e,t,u){var l,m,g=0,w,x=new e(function(_,b,F){u=M(u,{timeout:0,overload:!1},{timeout:function(W,J){return W*=1,(typeof W!="number"||W<0||!Number.isFinite(W))&&J("timeout must be a positive number"),W}}),l=!u.overload&&typeof e.prototype.cancel=="function"&&typeof F=="function";function V(){m&&(m=null),g&&(clearTimeout(g),g=0)}var D=function(W){V(),_(W)},B=function(W){V(),b(W)};l?t(D,B,F):(m=[function(W){B(W||Error("canceled"))}],t(D,B,function(W){if(w)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof W!="function")throw TypeError("onCancel callback must be a function");m.push(W)}),w=!0),u.timeout>0&&(g=setTimeout(function(){var W=Error("timeout");W.code="ETIMEDOUT",g=0,x.cancel(W),b(W)},u.timeout))});return l||(x.cancel=function(_){if(m){for(var b=m.length,F=1;F<b;F++)m[F](_);m[0](_),m=null}}),x}function Y(e){var t=this._observers;if(!t)return-1;for(var u=t.length,l=0;l<u;l++)if(t[l]._target===e)return l;return-1}function z(e,t,u,l,m){if(!u)return null;if(l===0){var g=typeof t;if(g==="string"){var w,x,_=0,b=0,F=this.delimiter,V=F.length;if((x=t.indexOf(F))!==-1){w=new Array(5);do w[_++]=t.slice(b,x),b=x+V;while((x=t.indexOf(F,b))!==-1);w[_++]=t.slice(b),t=w,m=_}else t=[t],m=1}else g==="object"?m=t.length:(t=[t],m=1)}var D=null,B,W,J,le,he,ie=t[l],ve=t[l+1],Z,X;if(l===m)u._listeners&&(typeof u._listeners=="function"?(e&&e.push(u._listeners),D=[u]):(e&&e.push.apply(e,u._listeners),D=[u]));else if(ie==="*"){for(Z=n(u),x=Z.length;x-- >0;)B=Z[x],B!=="_listeners"&&(X=z(e,t,u[B],l+1,m),X&&(D?D.push.apply(D,X):D=X));return D}else if(ie==="**"){for(he=l+1===m||l+2===m&&ve==="*",he&&u._listeners&&(D=z(e,t,u,m,m)),Z=n(u),x=Z.length;x-- >0;)B=Z[x],B!=="_listeners"&&(B==="*"||B==="**"?(u[B]._listeners&&!he&&(X=z(e,t,u[B],m,m),X&&(D?D.push.apply(D,X):D=X)),X=z(e,t,u[B],l,m)):B===ve?X=z(e,t,u[B],l+2,m):X=z(e,t,u[B],l,m),X&&(D?D.push.apply(D,X):D=X));return D}else u[ie]&&(D=z(e,t,u[ie],l+1,m));if(W=u["*"],W&&z(e,t,W,l+1,m),J=u["**"],J)if(l<m)for(J._listeners&&z(e,t,J,m,m),Z=n(J),x=Z.length;x-- >0;)B=Z[x],B!=="_listeners"&&(B===ve?z(e,t,J[B],l+2,m):B===ie?z(e,t,J[B],l+1,m):(le={},le[B]=J[B],z(e,t,{"**":le},l+1,m)));else J._listeners?z(e,t,J,m,m):J["*"]&&J["*"]._listeners&&z(e,t,J["*"],m,m);return D}function H(e,t,u){var l=0,m=0,g,w=this.delimiter,x=w.length,_;if(typeof e=="string")if((g=e.indexOf(w))!==-1){_=new Array(5);do _[l++]=e.slice(m,g),m=g+x;while((g=e.indexOf(w,m))!==-1);_[l++]=e.slice(m)}else _=[e],l=1;else _=e,l=e.length;if(l>1){for(g=0;g+1<l;g++)if(_[g]==="**"&&_[g+1]==="**")return}var b=this.listenerTree,F;for(g=0;g<l;g++)if(F=_[g],b=b[F]||(b[F]={}),g===l-1)return b._listeners?(typeof b._listeners=="function"&&(b._listeners=[b._listeners]),u?b._listeners.unshift(t):b._listeners.push(t),!b._listeners.warned&&this._maxListeners>0&&b._listeners.length>this._maxListeners&&(b._listeners.warned=!0,T.call(this,b._listeners.length,F))):b._listeners=t,!0;return!0}function k(e,t,u,l){for(var m=n(e),g=m.length,w,x,_,b=e._listeners,F;g-- >0;)x=m[g],w=e[x],x==="_listeners"?_=u:_=u?u.concat(x):[x],F=l||typeof x=="symbol",b&&t.push(F?_:_.join(this.delimiter)),typeof w=="object"&&k.call(this,w,t,_,F);return t}function q(e){for(var t=n(e),u=t.length,l,m,g;u-- >0;)m=t[u],l=e[m],l&&(g=!0,m!=="_listeners"&&!q(l)&&delete e[m]);return g}function E(e,t,u){this.emitter=e,this.event=t,this.listener=u}E.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function C(e,t,u){if(u===!0)m=!0;else if(u===!1)l=!0;else{if(!u||typeof u!="object")throw TypeError("options should be an object or true");var l=u.async,m=u.promisify,g=u.nextTick,w=u.objectify}if(l||g||m){var x=t,_=t._origin||t;if(g&&!S)throw Error("process.nextTick is not supported");m===a&&(m=t.constructor.name==="AsyncFunction"),t=function(){var b=arguments,F=this,V=this.event;return m?g?Promise.resolve():new Promise(function(D){i(D)}).then(function(){return F.event=V,x.apply(F,b)}):(g?process.nextTick:i)(function(){F.event=V,x.apply(F,b)})},t._async=!0,t._origin=_}return[t,w?new E(this,e,t):this]}function R(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,c.call(this,e)}R.EventEmitter2=R,R.prototype.listenTo=function(e,t,u){if(typeof e!="object")throw TypeError("target musts be an object");var l=this;u=M(u,{on:a,off:a,reducers:a},{on:G,off:G,reducers:I});function m(g){if(typeof g!="object")throw TypeError("events must be an object");var w=u.reducers,x=Y.call(l,e),_;x===-1?_=new L(l,e,u):_=l._observers[x];for(var b=n(g),F=b.length,V,D=typeof w=="function",B=0;B<F;B++)V=b[B],_.subscribe(V,g[V]||V,D?w:w&&w[V])}return o(t)?m(A(t)):m(typeof t=="string"?A(t.split(/\s+/)):t),this},R.prototype.stopListeningTo=function(e,t){var u=this._observers;if(!u)return!1;var l=u.length,m,g=!1;if(e&&typeof e!="object")throw TypeError("target should be an object");for(;l-- >0;)m=u[l],(!e||m._target===e)&&(m.unsubscribe(t),g=!0);return g},R.prototype.delimiter=".",R.prototype.setMaxListeners=function(e){e!==a&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},R.prototype.getMaxListeners=function(){return this._maxListeners},R.prototype.event="",R.prototype.once=function(e,t,u){return this._once(e,t,!1,u)},R.prototype.prependOnceListener=function(e,t,u){return this._once(e,t,!0,u)},R.prototype._once=function(e,t,u,l){return this._many(e,1,t,u,l)},R.prototype.many=function(e,t,u,l){return this._many(e,t,u,!1,l)},R.prototype.prependMany=function(e,t,u,l){return this._many(e,t,u,!0,l)},R.prototype._many=function(e,t,u,l,m){var g=this;if(typeof u!="function")throw new Error("many only accepts instances of Function");function w(){return--t===0&&g.off(e,w),u.apply(this,arguments)}return w._origin=u,this._on(e,w,l,m)},R.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||f.call(this);var e=arguments[0],t,u=this.wildcard,l,m,g,w,x;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(u&&(t=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(m=e.length,y){for(g=0;g<m;g++)if(typeof e[g]=="symbol"){x=!0;break}}x||(e=e.join(this.delimiter))}var _=arguments.length,b;if(this._all&&this._all.length)for(b=this._all.slice(),g=0,m=b.length;g<m;g++)switch(this.event=e,_){case 1:b[g].call(this,e);break;case 2:b[g].call(this,e,arguments[1]);break;case 3:b[g].call(this,e,arguments[1],arguments[2]);break;default:b[g].apply(this,arguments)}if(u)b=[],z.call(this,b,t,this.listenerTree,0,m);else if(b=this._events[e],typeof b=="function"){switch(this.event=e,_){case 1:b.call(this);break;case 2:b.call(this,arguments[1]);break;case 3:b.call(this,arguments[1],arguments[2]);break;default:for(l=new Array(_-1),w=1;w<_;w++)l[w-1]=arguments[w];b.apply(this,l)}return!0}else b&&(b=b.slice());if(b&&b.length){if(_>3)for(l=new Array(_-1),w=1;w<_;w++)l[w-1]=arguments[w];for(g=0,m=b.length;g<m;g++)switch(this.event=e,_){case 1:b[g].call(this);break;case 2:b[g].call(this,arguments[1]);break;case 3:b[g].call(this,arguments[1],arguments[2]);break;default:b[g].apply(this,l)}return!0}else if(!this.ignoreErrors&&!this._all&&e==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},R.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||f.call(this);var e=arguments[0],t=this.wildcard,u,l,m,g,w,x;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(t&&(u=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(g=e.length,y){for(w=0;w<g;w++)if(typeof e[w]=="symbol"){l=!0;break}}l||(e=e.join(this.delimiter))}var _=[],b=arguments.length,F;if(this._all)for(w=0,g=this._all.length;w<g;w++)switch(this.event=e,b){case 1:_.push(this._all[w].call(this,e));break;case 2:_.push(this._all[w].call(this,e,arguments[1]));break;case 3:_.push(this._all[w].call(this,e,arguments[1],arguments[2]));break;default:_.push(this._all[w].apply(this,arguments))}if(t?(F=[],z.call(this,F,u,this.listenerTree,0)):F=this._events[e],typeof F=="function")switch(this.event=e,b){case 1:_.push(F.call(this));break;case 2:_.push(F.call(this,arguments[1]));break;case 3:_.push(F.call(this,arguments[1],arguments[2]));break;default:for(m=new Array(b-1),x=1;x<b;x++)m[x-1]=arguments[x];_.push(F.apply(this,m))}else if(F&&F.length){if(F=F.slice(),b>3)for(m=new Array(b-1),x=1;x<b;x++)m[x-1]=arguments[x];for(w=0,g=F.length;w<g;w++)switch(this.event=e,b){case 1:_.push(F[w].call(this));break;case 2:_.push(F[w].call(this,arguments[1]));break;case 3:_.push(F[w].call(this,arguments[1],arguments[2]));break;default:_.push(F[w].apply(this,m))}}else if(!this.ignoreErrors&&!this._all&&e==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(_)},R.prototype.on=function(e,t,u){return this._on(e,t,!1,u)},R.prototype.prependListener=function(e,t,u){return this._on(e,t,!0,u)},R.prototype.onAny=function(e){return this._onAny(e,!1)},R.prototype.prependAny=function(e){return this._onAny(e,!0)},R.prototype.addListener=R.prototype.on,R.prototype._onAny=function(e,t){if(typeof e!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},R.prototype._on=function(e,t,u,l){if(typeof e=="function")return this._onAny(e,t),this;if(typeof t!="function")throw new Error("on only accepts instances of Function");this._events||f.call(this);var m=this,g;return l!==a&&(g=C.call(this,e,t,l),t=g[0],m=g[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?(H.call(this,e,t,u),m):(this._events[e]?(typeof this._events[e]=="function"&&(this._events[e]=[this._events[e]]),u?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,T.call(this,this._events[e].length,e))):this._events[e]=t,m)},R.prototype.off=function(e,t){if(typeof t!="function")throw new Error("removeListener only takes instances of Function");var u,l=[];if(this.wildcard){var m=typeof e=="string"?e.split(this.delimiter):e.slice();if(l=z.call(this,null,m,this.listenerTree,0),!l)return this}else{if(!this._events[e])return this;u=this._events[e],l.push({_listeners:u})}for(var g=0;g<l.length;g++){var w=l[g];if(u=w._listeners,o(u)){for(var x=-1,_=0,b=u.length;_<b;_++)if(u[_]===t||u[_].listener&&u[_].listener===t||u[_]._origin&&u[_]._origin===t){x=_;break}if(x<0)continue;return this.wildcard?w._listeners.splice(x,1):this._events[e].splice(x,1),u.length===0&&(this.wildcard?delete w._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}else(u===t||u.listener&&u.listener===t||u._origin&&u._origin===t)&&(this.wildcard?delete w._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&q(this.listenerTree),this},R.prototype.offAny=function(e){var t=0,u=0,l;if(e&&this._all&&this._all.length>0){for(l=this._all,t=0,u=l.length;t<u;t++)if(e===l[t])return l.splice(t,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(l=this._all,this._removeListener)for(t=0,u=l.length;t<u;t++)this.emit("removeListenerAny",l[t]);this._all=[]}return this},R.prototype.removeListener=R.prototype.off,R.prototype.removeAllListeners=function(e){if(e===a)return!this._events||f.call(this),this;if(this.wildcard){var t=z.call(this,null,e,this.listenerTree,0),u,l;if(!t)return this;for(l=0;l<t.length;l++)u=t[l],u._listeners=null;this.listenerTree&&q(this.listenerTree)}else this._events&&(this._events[e]=null);return this},R.prototype.listeners=function(e){var t=this._events,u,l,m,g,w;if(e===a){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!t)return[];for(u=n(t),g=u.length,m=[];g-- >0;)l=t[u[g]],typeof l=="function"?m.push(l):m.push.apply(m,l);return m}else{if(this.wildcard){if(w=this.listenerTree,!w)return[];var x=[],_=typeof e=="string"?e.split(this.delimiter):e.slice();return z.call(this,x,_,w,0),x}return t?(l=t[e],l?typeof l=="function"?[l]:l:[]):[]}},R.prototype.eventNames=function(e){var t=this._events;return this.wildcard?k.call(this,this.listenerTree,[],null,e):t?n(t):[]},R.prototype.listenerCount=function(e){return this.listeners(e).length},R.prototype.hasListeners=function(e){if(this.wildcard){var t=[],u=typeof e=="string"?e.split(this.delimiter):e.slice();return z.call(this,t,u,this.listenerTree,0),t.length>0}var l=this._events,m=this._all;return!!(m&&m.length||l&&(e===a?n(l).length:l[e]))},R.prototype.listenersAny=function(){return this._all?this._all:[]},R.prototype.waitFor=function(e,t){var u=this,l=typeof t;return l==="number"?t={timeout:t}:l==="function"&&(t={filter:t}),t=M(t,{timeout:0,filter:a,handleError:!1,Promise,overload:!1},{filter:G,Promise:U}),Q(t.Promise,function(m,g,w){function x(){var _=t.filter;if(!(_&&!_.apply(u,arguments)))if(u.off(e,x),t.handleError){var b=arguments[0];b?g(b):m(O.apply(null,arguments).slice(1))}else m(O.apply(null,arguments))}w(function(){u.off(e,x)}),u._on(e,x,!1)},{timeout:t.timeout,overload:t.overload})};function P(e,t,u){u=M(u,{Promise,timeout:0,overload:!1},{Promise:U});var l=u.Promise;return Q(l,function(m,g,w){var x;if(typeof e.addEventListener=="function"){x=function(){m(O.apply(null,arguments))},w(function(){e.removeEventListener(t,x)}),e.addEventListener(t,x,{once:!0});return}var _=function(){b&&e.removeListener("error",b),m(O.apply(null,arguments))},b;t!=="error"&&(b=function(F){e.removeListener(t,_),g(F)},e.once("error",b)),w(function(){b&&e.removeListener("error",b),e.removeListener(t,_)}),e.once(t,_)},{timeout:u.timeout,overload:u.overload})}var j=R.prototype;Object.defineProperties(R,{defaultMaxListeners:{get:function(){return j._maxListeners},set:function(e){if(typeof e!="number"||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");j._maxListeners=e},enumerable:!0},once:{value:P,writable:!0,configurable:!0}}),Object.defineProperties(j,{_maxListeners:{value:h,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof a=="function"&&a.amd?a(function(){return R}):p.exports=R})()}(Me)),Me.exports}var Ae,Tt;function fe(){if(Tt)return Ae;Tt=1;var p=rr();ne();var s=$().EventEmitter2;function a(r){r=r||{},this.ros=r.ros,this.name=r.name,this.serviceType=r.serviceType,this.isAdvertised=!1,this._serviceCallback=null}return a.prototype.__proto__=s.prototype,a.prototype.callService=function(r,o,h){if(!this.isAdvertised){var S="call_service:"+this.name+":"+ ++this.ros.idCounter;(o||h)&&this.ros.once(S,function(d){d.result!==void 0&&d.result===!1?typeof h=="function"&&h(d.values):typeof o=="function"&&o(new p(d.values))});var y={op:"call_service",id:S,service:this.name,type:this.serviceType,args:r};this.ros.callOnConnection(y)}},a.prototype.advertise=function(r){this.isAdvertised||typeof r!="function"||(this._serviceCallback=r,this.ros.on(this.name,this._serviceResponse.bind(this)),this.ros.callOnConnection({op:"advertise_service",type:this.serviceType,service:this.name}),this.isAdvertised=!0)},a.prototype.unadvertise=function(){this.isAdvertised&&(this.ros.callOnConnection({op:"unadvertise_service",service:this.name}),this.isAdvertised=!1)},a.prototype._serviceResponse=function(r){var o={},h=this._serviceCallback(r.args,o),S={op:"service_response",service:this.name,values:new p(o),result:h};r.id&&(S.id=r.id),this.ros.callOnConnection(S)},Ae=a,Ae}var Ue,St;function nt(){if(St)return Ue;St=1;var p=tr(),s=br(),a=Lr(),r=fe(),o=ne(),h=K,S=$().EventEmitter2;function y(d){d=d||{};var v=this;this.socket=null,this.idCounter=0,this.isConnected=!1,this.transportLibrary=d.transportLibrary||"websocket",this.transportOptions=d.transportOptions||{},this._sendFunc=function(i){v.sendEncodedMessage(i)},typeof d.groovyCompatibility>"u"?this.groovyCompatibility=!0:this.groovyCompatibility=d.groovyCompatibility,this.setMaxListeners(0),d.url&&this.connect(d.url)}return y.prototype.__proto__=S.prototype,y.prototype.connect=function(d){if(this.transportLibrary==="socket.io")this.socket=h(io(d,{"force new connection":!0}),a(this)),this.socket.on("connect",this.socket.onopen),this.socket.on("data",this.socket.onmessage),this.socket.on("close",this.socket.onclose),this.socket.on("error",this.socket.onerror);else if(this.transportLibrary.constructor.name==="RTCPeerConnection")this.socket=h(this.transportLibrary.createDataChannel(d,this.transportOptions),a(this));else if(this.transportLibrary==="websocket"){if(!this.socket||this.socket.readyState===p.CLOSED){var v=new p(d);v.binaryType="arraybuffer",this.socket=h(v,a(this))}}else if(this.transportLibrary==="workersocket")this.socket=h(new s(d),a(this));else throw"Unknown transportLibrary: "+this.transportLibrary.toString()},y.prototype.close=function(){this.socket&&this.socket.close()},y.prototype.authenticate=function(d,v,i,n,f,c,T){var O={op:"auth",mac:d,client:v,dest:i,rand:n,t:f,level:c,end:T};this.callOnConnection(O)},y.prototype.sendEncodedMessage=function(d){var v=null,i=this;this.transportLibrary==="socket.io"?v=function(n){i.socket.emit("operation",n)}:v=function(n){i.socket.send(n)},this.isConnected?v(d):i.once("connection",function(){v(d)})},y.prototype.callOnConnection=function(d){this.transportOptions.encoder?this.transportOptions.encoder(d,this._sendFunc):this._sendFunc(JSON.stringify(d))},y.prototype.setStatusLevel=function(d,v){var i={op:"set_level",level:d,id:v};this.callOnConnection(i)},y.prototype.getActionServers=function(d,v){var i=new r({ros:this,name:"/rosapi/action_servers",serviceType:"rosapi/GetActionServers"}),n=new o({});typeof v=="function"?i.callService(n,function(f){d(f.action_servers)},function(f){v(f)}):i.callService(n,function(f){d(f.action_servers)})},y.prototype.getTopics=function(d,v){var i=new r({ros:this,name:"/rosapi/topics",serviceType:"rosapi/Topics"}),n=new o;typeof v=="function"?i.callService(n,function(f){d(f)},function(f){v(f)}):i.callService(n,function(f){d(f)})},y.prototype.getTopicsForType=function(d,v,i){var n=new r({ros:this,name:"/rosapi/topics_for_type",serviceType:"rosapi/TopicsForType"}),f=new o({type:d});typeof i=="function"?n.callService(f,function(c){v(c.topics)},function(c){i(c)}):n.callService(f,function(c){v(c.topics)})},y.prototype.getServices=function(d,v){var i=new r({ros:this,name:"/rosapi/services",serviceType:"rosapi/Services"}),n=new o;typeof v=="function"?i.callService(n,function(f){d(f.services)},function(f){v(f)}):i.callService(n,function(f){d(f.services)})},y.prototype.getServicesForType=function(d,v,i){var n=new r({ros:this,name:"/rosapi/services_for_type",serviceType:"rosapi/ServicesForType"}),f=new o({type:d});typeof i=="function"?n.callService(f,function(c){v(c.services)},function(c){i(c)}):n.callService(f,function(c){v(c.services)})},y.prototype.getServiceRequestDetails=function(d,v,i){var n=new r({ros:this,name:"/rosapi/service_request_details",serviceType:"rosapi/ServiceRequestDetails"}),f=new o({type:d});typeof i=="function"?n.callService(f,function(c){v(c)},function(c){i(c)}):n.callService(f,function(c){v(c)})},y.prototype.getServiceResponseDetails=function(d,v,i){var n=new r({ros:this,name:"/rosapi/service_response_details",serviceType:"rosapi/ServiceResponseDetails"}),f=new o({type:d});typeof i=="function"?n.callService(f,function(c){v(c)},function(c){i(c)}):n.callService(f,function(c){v(c)})},y.prototype.getNodes=function(d,v){var i=new r({ros:this,name:"/rosapi/nodes",serviceType:"rosapi/Nodes"}),n=new o;typeof v=="function"?i.callService(n,function(f){d(f.nodes)},function(f){v(f)}):i.callService(n,function(f){d(f.nodes)})},y.prototype.getNodeDetails=function(d,v,i){var n=new r({ros:this,name:"/rosapi/node_details",serviceType:"rosapi/NodeDetails"}),f=new o({node:d});typeof i=="function"?n.callService(f,function(c){v(c.subscribing,c.publishing,c.services)},function(c){i(c)}):n.callService(f,function(c){v(c)})},y.prototype.getParams=function(d,v){var i=new r({ros:this,name:"/rosapi/get_param_names",serviceType:"rosapi/GetParamNames"}),n=new o;typeof v=="function"?i.callService(n,function(f){d(f.names)},function(f){v(f)}):i.callService(n,function(f){d(f.names)})},y.prototype.getTopicType=function(d,v,i){var n=new r({ros:this,name:"/rosapi/topic_type",serviceType:"rosapi/TopicType"}),f=new o({topic:d});typeof i=="function"?n.callService(f,function(c){v(c.type)},function(c){i(c)}):n.callService(f,function(c){v(c.type)})},y.prototype.getServiceType=function(d,v,i){var n=new r({ros:this,name:"/rosapi/service_type",serviceType:"rosapi/ServiceType"}),f=new o({service:d});typeof i=="function"?n.callService(f,function(c){v(c.type)},function(c){i(c)}):n.callService(f,function(c){v(c.type)})},y.prototype.getMessageDetails=function(d,v,i){var n=new r({ros:this,name:"/rosapi/message_details",serviceType:"rosapi/MessageDetails"}),f=new o({type:d});typeof i=="function"?n.callService(f,function(c){v(c.typedefs)},function(c){i(c)}):n.callService(f,function(c){v(c.typedefs)})},y.prototype.decodeTypeDefs=function(d){var v=this,i=function(n,f){for(var c={},T=0;T<n.fieldnames.length;T++){var O=n.fieldarraylen[T],A=n.fieldnames[T],L=n.fieldtypes[T];if(L.indexOf("/")===-1)O===-1?c[A]=L:c[A]=[L];else{for(var M=!1,U=0;U<f.length;U++)if(f[U].type.toString()===L.toString()){M=f[U];break}if(M){var N=i(M,f);O===-1||(c[A]=[N])}else v.emit("error","Cannot find "+L+" in decodeTypeDefs")}}return c};return i(d[0],d)},y.prototype.getTopicsAndRawTypes=function(d,v){var i=new r({ros:this,name:"/rosapi/topics_and_raw_types",serviceType:"rosapi/TopicsAndRawTypes"}),n=new o;typeof v=="function"?i.callService(n,function(f){d(f)},function(f){v(f)}):i.callService(n,function(f){d(f)})},Ue=y,Ue}var Ee,Rt;function te(){if(Rt)return Ee;Rt=1;var p=K;function s(a){p(this,a)}return Ee=s,Ee}var Oe,Lt;function ae(){if(Lt)return Oe;Lt=1;var p=$().EventEmitter2,s=te();function a(r){r=r||{},this.ros=r.ros,this.name=r.name,this.messageType=r.messageType,this.isAdvertised=!1,this.compression=r.compression||"none",this.throttle_rate=r.throttle_rate||0,this.latch=r.latch||!1,this.queue_size=r.queue_size||100,this.queue_length=r.queue_length||0,this.reconnect_on_close=r.reconnect_on_close!==void 0?r.reconnect_on_close:!0,this.compression&&this.compression!=="png"&&this.compression!=="cbor"&&this.compression!=="cbor-raw"&&this.compression!=="none"&&(this.emit("warning",this.compression+" compression is not supported. No compression will be used."),this.compression="none"),this.throttle_rate<0&&(this.emit("warning",this.throttle_rate+" is not allowed. Set to 0"),this.throttle_rate=0);var o=this;this.reconnect_on_close?this.callForSubscribeAndAdvertise=function(h){o.ros.callOnConnection(h),o.waitForReconnect=!1,o.reconnectFunc=function(){o.waitForReconnect||(o.waitForReconnect=!0,o.ros.callOnConnection(h),o.ros.once("connection",function(){o.waitForReconnect=!1}))},o.ros.on("close",o.reconnectFunc)}:this.callForSubscribeAndAdvertise=this.ros.callOnConnection,this._messageCallback=function(h){o.emit("message",new s(h))}}return a.prototype.__proto__=p.prototype,a.prototype.subscribe=function(r){typeof r=="function"&&this.on("message",r),!this.subscribeId&&(this.ros.on(this.name,this._messageCallback),this.subscribeId="subscribe:"+this.name+":"+ ++this.ros.idCounter,this.callForSubscribeAndAdvertise({op:"subscribe",id:this.subscribeId,type:this.messageType,topic:this.name,compression:this.compression,throttle_rate:this.throttle_rate,queue_length:this.queue_length}))},a.prototype.unsubscribe=function(r){r&&(this.off("message",r),this.listeners("message").length)||this.subscribeId&&(this.ros.off(this.name,this._messageCallback),this.reconnect_on_close&&this.ros.off("close",this.reconnectFunc),this.emit("unsubscribe"),this.ros.callOnConnection({op:"unsubscribe",id:this.subscribeId,topic:this.name}),this.subscribeId=null)},a.prototype.advertise=function(){if(!this.isAdvertised&&(this.advertiseId="advertise:"+this.name+":"+ ++this.ros.idCounter,this.callForSubscribeAndAdvertise({op:"advertise",id:this.advertiseId,type:this.messageType,topic:this.name,latch:this.latch,queue_size:this.queue_size}),this.isAdvertised=!0,!this.reconnect_on_close)){var r=this;this.ros.on("close",function(){r.isAdvertised=!1})}},a.prototype.unadvertise=function(){this.isAdvertised&&(this.reconnect_on_close&&this.ros.off("close",this.reconnectFunc),this.emit("unadvertise"),this.ros.callOnConnection({op:"unadvertise",id:this.advertiseId,topic:this.name}),this.isAdvertised=!1)},a.prototype.publish=function(r){this.isAdvertised||this.advertise(),this.ros.idCounter++;var o={op:"publish",id:"publish:"+this.name+":"+this.ros.idCounter,topic:this.name,msg:r,latch:this.latch};this.ros.callOnConnection(o)},Oe=a,Oe}var Fe,kt;function kr(){if(kt)return Fe;kt=1;var p=fe(),s=ne();function a(r){r=r||{},this.ros=r.ros,this.name=r.name}return a.prototype.get=function(r){var o=new p({ros:this.ros,name:"/rosapi/get_param",serviceType:"rosapi/GetParam"}),h=new s({name:this.name});o.callService(h,function(S){var y=JSON.parse(S.value);r(y)})},a.prototype.set=function(r,o){var h=new p({ros:this.ros,name:"/rosapi/set_param",serviceType:"rosapi/SetParam"}),S=new s({name:this.name,value:JSON.stringify(r)});h.callService(S,o)},a.prototype.delete=function(r){var o=new p({ros:this.ros,name:"/rosapi/delete_param",serviceType:"rosapi/DeleteParam"}),h=new s({name:this.name});o.callService(h,r)},Fe=a,Fe}var Mt;function Mr(){if(Mt)return pe.exports;Mt=1;var p=st(),s=pe.exports={Ros:nt(),Topic:ae(),Message:te(),Param:kr(),Service:fe(),ServiceRequest:ne(),ServiceResponse:rr()};return p(s.Ros,["Param","Service","Topic"],s),pe.exports}var Ce={exports:{}},qe,At;function ir(){if(At)return qe;At=1;var p=ae(),s=te(),a=$().EventEmitter2;function r(o){var h=this;o=o||{},this.ros=o.ros,this.serverName=o.serverName,this.actionName=o.actionName,this.timeout=o.timeout,this.omitFeedback=o.omitFeedback,this.omitStatus=o.omitStatus,this.omitResult=o.omitResult,this.goals={};var S=!1;this.feedbackListener=new p({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),this.statusListener=new p({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"}),this.resultListener=new p({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"}),this.goalTopic=new p({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),this.cancelTopic=new p({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"}),this.goalTopic.advertise(),this.cancelTopic.advertise(),this.omitStatus||this.statusListener.subscribe(function(y){S=!0,y.status_list.forEach(function(d){var v=h.goals[d.goal_id.id];v&&v.emit("status",d)})}),this.omitFeedback||this.feedbackListener.subscribe(function(y){var d=h.goals[y.status.goal_id.id];d&&(d.emit("status",y.status),d.emit("feedback",y.feedback))}),this.omitResult||this.resultListener.subscribe(function(y){var d=h.goals[y.status.goal_id.id];d&&(d.emit("status",y.status),d.emit("result",y.result))}),this.timeout&&setTimeout(function(){S||h.emit("timeout")},this.timeout)}return r.prototype.__proto__=a.prototype,r.prototype.cancel=function(){var o=new s;this.cancelTopic.publish(o)},r.prototype.dispose=function(){this.goalTopic.unadvertise(),this.cancelTopic.unadvertise(),this.omitStatus||this.statusListener.unsubscribe(),this.omitFeedback||this.feedbackListener.unsubscribe(),this.omitResult||this.resultListener.unsubscribe()},qe=r,qe}var Ne,Ut;function Ar(){if(Ut)return Ne;Ut=1;var p=ae();te();var s=$().EventEmitter2;function a(r){var o=this;r=r||{},this.ros=r.ros,this.serverName=r.serverName,this.actionName=r.actionName,this.timeout=r.timeout,this.omitFeedback=r.omitFeedback,this.omitStatus=r.omitStatus,this.omitResult=r.omitResult;var h=new p({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),S=new p({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),y=new p({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"}),d=new p({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"});h.subscribe(function(v){o.emit("goal",v)}),y.subscribe(function(v){v.status_list.forEach(function(i){o.emit("status",i)})}),S.subscribe(function(v){o.emit("status",v.status),o.emit("feedback",v.feedback)}),d.subscribe(function(v){o.emit("status",v.status),o.emit("result",v.result)})}return a.prototype.__proto__=s.prototype,Ne=a,Ne}var Pe,Et;function sr(){if(Et)return Pe;Et=1;var p=te(),s=$().EventEmitter2;function a(r){var o=this;this.actionClient=r.actionClient,this.goalMessage=r.goalMessage,this.isFinished=!1;var h=new Date;this.goalID="goal_"+Math.random()+"_"+h.getTime(),this.goalMessage=new p({goal_id:{stamp:{secs:0,nsecs:0},id:this.goalID},goal:this.goalMessage}),this.on("status",function(S){o.status=S}),this.on("result",function(S){o.isFinished=!0,o.result=S}),this.on("feedback",function(S){o.feedback=S}),this.actionClient.goals[this.goalID]=this}return a.prototype.__proto__=s.prototype,a.prototype.send=function(r){var o=this;o.actionClient.goalTopic.publish(o.goalMessage),r&&setTimeout(function(){o.isFinished||o.emit("timeout")},r)},a.prototype.cancel=function(){var r=new p({id:this.goalID});this.actionClient.cancelTopic.publish(r)},Pe=a,Pe}var je,Ot;function Ur(){if(Ot)return je;Ot=1;var p=ae(),s=te(),a=$().EventEmitter2;function r(o){var h=this;o=o||{},this.ros=o.ros,this.serverName=o.serverName,this.actionName=o.actionName,this.feedbackPublisher=new p({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),this.feedbackPublisher.advertise();var S=new p({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"});S.advertise(),this.resultPublisher=new p({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"}),this.resultPublisher.advertise();var y=new p({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),d=new p({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"});this.statusMessage=new s({header:{stamp:{secs:0,nsecs:100},frame_id:""},status_list:[]}),this.currentGoal=null,this.nextGoal=null,y.subscribe(function(i){h.currentGoal?(h.nextGoal=i,h.emit("cancel")):(h.statusMessage.status_list=[{goal_id:i.goal_id,status:1}],h.currentGoal=i,h.emit("goal",i.goal))});var v=function(i,n){return i.secs>n.secs?!1:i.secs<n.secs?!0:i.nsecs<n.nsecs};d.subscribe(function(i){i.stamp.secs===0&&i.stamp.secs===0&&i.id===""?(h.nextGoal=null,h.currentGoal&&h.emit("cancel")):(h.currentGoal&&i.id===h.currentGoal.goal_id.id?h.emit("cancel"):h.nextGoal&&i.id===h.nextGoal.goal_id.id&&(h.nextGoal=null),h.nextGoal&&v(h.nextGoal.goal_id.stamp,i.stamp)&&(h.nextGoal=null),h.currentGoal&&v(h.currentGoal.goal_id.stamp,i.stamp)&&h.emit("cancel"))}),setInterval(function(){var i=new Date,n=Math.floor(i.getTime()/1e3),f=Math.round(1e9*(i.getTime()/1e3-n));h.statusMessage.header.stamp.secs=n,h.statusMessage.header.stamp.nsecs=f,S.publish(h.statusMessage)},500)}return r.prototype.__proto__=a.prototype,r.prototype.setSucceeded=function(o){var h=new s({status:{goal_id:this.currentGoal.goal_id,status:3},result:o});this.resultPublisher.publish(h),this.statusMessage.status_list=[],this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},r.prototype.setAborted=function(o){var h=new s({status:{goal_id:this.currentGoal.goal_id,status:4},result:o});this.resultPublisher.publish(h),this.statusMessage.status_list=[],this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},r.prototype.sendFeedback=function(o){var h=new s({status:{goal_id:this.currentGoal.goal_id,status:1},feedback:o});this.feedbackPublisher.publish(h)},r.prototype.setPreempted=function(){this.statusMessage.status_list=[];var o=new s({status:{goal_id:this.currentGoal.goal_id,status:2}});this.resultPublisher.publish(o),this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},je=r,je}var Ft;function Er(){if(Ft)return Ce.exports;Ft=1;var p=nt(),s=st(),a=Ce.exports={ActionClient:ir(),ActionListener:Ar(),Goal:sr(),SimpleActionServer:Ur()};return s(p,["ActionClient","SimpleActionServer"],a),Ce.exports}var Ge,Ct;function ee(){if(Ct)return Ge;Ct=1;function p(s){s=s||{},this.x=s.x||0,this.y=s.y||0,this.z=s.z||0}return p.prototype.add=function(s){this.x+=s.x,this.y+=s.y,this.z+=s.z},p.prototype.subtract=function(s){this.x-=s.x,this.y-=s.y,this.z-=s.z},p.prototype.multiplyQuaternion=function(s){var a=s.w*this.x+s.y*this.z-s.z*this.y,r=s.w*this.y+s.z*this.x-s.x*this.z,o=s.w*this.z+s.x*this.y-s.y*this.x,h=-s.x*this.x-s.y*this.y-s.z*this.z;this.x=a*s.w+h*-s.x+r*-s.z-o*-s.y,this.y=r*s.w+h*-s.y+o*-s.x-a*-s.z,this.z=o*s.w+h*-s.z+a*-s.y-r*-s.x},p.prototype.clone=function(){return new p(this)},Ge=p,Ge}var De,qt;function oe(){if(qt)return De;qt=1;function p(s){s=s||{},this.x=s.x||0,this.y=s.y||0,this.z=s.z||0,this.w=typeof s.w=="number"?s.w:1}return p.prototype.conjugate=function(){this.x*=-1,this.y*=-1,this.z*=-1},p.prototype.norm=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},p.prototype.normalize=function(){var s=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);s===0?(this.x=0,this.y=0,this.z=0,this.w=1):(s=1/s,this.x=this.x*s,this.y=this.y*s,this.z=this.z*s,this.w=this.w*s)},p.prototype.invert=function(){this.conjugate(),this.normalize()},p.prototype.multiply=function(s){var a=this.x*s.w+this.y*s.z-this.z*s.y+this.w*s.x,r=-this.x*s.z+this.y*s.w+this.z*s.x+this.w*s.y,o=this.x*s.y-this.y*s.x+this.z*s.w+this.w*s.z,h=-this.x*s.x-this.y*s.y-this.z*s.z+this.w*s.w;this.x=a,this.y=r,this.z=o,this.w=h},p.prototype.clone=function(){return new p(this)},De=p,De}var Be,Nt;function at(){if(Nt)return Be;Nt=1;var p=ee(),s=oe();function a(r){r=r||{},this.position=new p(r.position),this.orientation=new s(r.orientation)}return a.prototype.applyTransform=function(r){this.position.multiplyQuaternion(r.rotation),this.position.add(r.translation);var o=r.rotation.clone();o.multiply(this.orientation),this.orientation=o},a.prototype.clone=function(){return new a(this)},a.prototype.multiply=function(r){var o=r.clone();return o.applyTransform({rotation:this.orientation,translation:this.position}),o},a.prototype.getInverse=function(){var r=this.clone();return r.orientation.invert(),r.position.multiplyQuaternion(r.orientation),r.position.x*=-1,r.position.y*=-1,r.position.z*=-1,r},Be=a,Be}var ze,Pt;function nr(){if(Pt)return ze;Pt=1;var p=ee(),s=oe();function a(r){r=r||{},this.translation=new p(r.translation),this.rotation=new s(r.rotation)}return a.prototype.clone=function(){return new a(this)},ze=a,ze}var Ie,jt;function Or(){return jt||(jt=1,Ie={Pose:at(),Quaternion:oe(),Transform:nr(),Vector3:ee()}),Ie}var We={exports:{}},Ve,Gt;function Fr(){if(Gt)return Ve;Gt=1;var p=ir(),s=sr(),a=fe(),r=ne(),o=ae(),h=nr();function S(y){y=y||{},this.ros=y.ros,this.fixedFrame=y.fixedFrame||"/base_link",this.angularThres=y.angularThres||2,this.transThres=y.transThres||.01,this.rate=y.rate||10,this.updateDelay=y.updateDelay||50;var d=y.topicTimeout||2,v=Math.floor(d),i=Math.floor((d-v)*1e9);this.topicTimeout={secs:v,nsecs:i},this.serverName=y.serverName||"/tf2_web_republisher",this.repubServiceName=y.repubServiceName||"/republish_tfs",this.currentGoal=!1,this.currentTopic=!1,this.frameInfos={},this.republisherUpdateRequested=!1,this._subscribeCB=null,this._isDisposed=!1,this.actionClient=new p({ros:y.ros,serverName:this.serverName,actionName:"tf2_web_republisher/TFSubscriptionAction",omitStatus:!0,omitResult:!0}),this.serviceClient=new a({ros:y.ros,name:this.repubServiceName,serviceType:"tf2_web_republisher/RepublishTFs"})}return S.prototype.processTFArray=function(y){y.transforms.forEach(function(d){var v=d.child_frame_id;v[0]==="/"&&(v=v.substring(1));var i=this.frameInfos[v];i&&(i.transform=new h({translation:d.transform.translation,rotation:d.transform.rotation}),i.cbs.forEach(function(n){n(i.transform)}))},this)},S.prototype.updateGoal=function(){var y={source_frames:Object.keys(this.frameInfos),target_frame:this.fixedFrame,angular_thres:this.angularThres,trans_thres:this.transThres,rate:this.rate};if(this.ros.groovyCompatibility)this.currentGoal&&this.currentGoal.cancel(),this.currentGoal=new s({actionClient:this.actionClient,goalMessage:y}),this.currentGoal.on("feedback",this.processTFArray.bind(this)),this.currentGoal.send();else{y.timeout=this.topicTimeout;var d=new r(y);this.serviceClient.callService(d,this.processResponse.bind(this))}this.republisherUpdateRequested=!1},S.prototype.processResponse=function(y){this._isDisposed||(this.currentTopic&&this.currentTopic.unsubscribe(this._subscribeCB),this.currentTopic=new o({ros:this.ros,name:y.topic_name,messageType:"tf2_web_republisher/TFArray"}),this._subscribeCB=this.processTFArray.bind(this),this.currentTopic.subscribe(this._subscribeCB))},S.prototype.subscribe=function(y,d){y[0]==="/"&&(y=y.substring(1)),this.frameInfos[y]?this.frameInfos[y].transform&&d(this.frameInfos[y].transform):(this.frameInfos[y]={cbs:[]},this.republisherUpdateRequested||(setTimeout(this.updateGoal.bind(this),this.updateDelay),this.republisherUpdateRequested=!0)),this.frameInfos[y].cbs.push(d)},S.prototype.unsubscribe=function(y,d){y[0]==="/"&&(y=y.substring(1));for(var v=this.frameInfos[y],i=v&&v.cbs||[],n=i.length;n--;)i[n]===d&&i.splice(n,1);(!d||i.length===0)&&delete this.frameInfos[y]},S.prototype.dispose=function(){this._isDisposed=!0,this.actionClient.dispose(),this.currentTopic&&this.currentTopic.unsubscribe(this._subscribeCB)},Ve=S,Ve}var Dt;function Cr(){if(Dt)return We.exports;Dt=1;var p=nt(),s=st(),a=We.exports={TFClient:Fr()};return s(p,["TFClient"],a),We.exports}var Je,Bt;function ue(){return Bt||(Bt=1,Je={URDF_SPHERE:0,URDF_BOX:1,URDF_CYLINDER:2,URDF_MESH:3}),Je}var Qe,zt;function ar(){if(zt)return Qe;zt=1;var p=ee(),s=ue();function a(r){this.dimension=null,this.type=s.URDF_BOX;var o=r.xml.getAttribute("size").split(" ");this.dimension=new p({x:parseFloat(o[0]),y:parseFloat(o[1]),z:parseFloat(o[2])})}return Qe=a,Qe}var Xe,It;function or(){if(It)return Xe;It=1;function p(s){var a=s.xml.getAttribute("rgba").split(" ");this.r=parseFloat(a[0]),this.g=parseFloat(a[1]),this.b=parseFloat(a[2]),this.a=parseFloat(a[3])}return Xe=p,Xe}var Ye,Wt;function ur(){if(Wt)return Ye;Wt=1;var p=ue();function s(a){this.type=p.URDF_CYLINDER,this.length=parseFloat(a.xml.getAttribute("length")),this.radius=parseFloat(a.xml.getAttribute("radius"))}return Ye=s,Ye}var He,Vt;function ot(){if(Vt)return He;Vt=1;var p=or();function s(r){this.textureFilename=null,this.color=null,this.name=r.xml.getAttribute("name");var o=r.xml.getElementsByTagName("texture");o.length>0&&(this.textureFilename=o[0].getAttribute("filename"));var h=r.xml.getElementsByTagName("color");h.length>0&&(this.color=new p({xml:h[0]}))}s.prototype.isLink=function(){return this.color===null&&this.textureFilename===null};var a=K;return s.prototype.assign=function(r){return a(this,r)},He=s,He}var Ze,Jt;function cr(){if(Jt)return Ze;Jt=1;var p=ee(),s=ue();function a(r){this.scale=null,this.type=s.URDF_MESH,this.filename=r.xml.getAttribute("filename");var o=r.xml.getAttribute("scale");if(o){var h=o.split(" ");this.scale=new p({x:parseFloat(h[0]),y:parseFloat(h[1]),z:parseFloat(h[2])})}}return Ze=a,Ze}var Ke,Qt;function fr(){if(Qt)return Ke;Qt=1;var p=ue();function s(a){this.type=p.URDF_SPHERE,this.radius=parseFloat(a.xml.getAttribute("radius"))}return Ke=s,Ke}var $e,Xt;function lr(){if(Xt)return $e;Xt=1;var p=at(),s=ee(),a=oe(),r=ur(),o=ar(),h=ot(),S=cr(),y=fr();function d(v){var i=v.xml;this.origin=null,this.geometry=null,this.material=null,this.name=v.xml.getAttribute("name");var n=i.getElementsByTagName("origin");if(n.length===0)this.origin=new p;else{var f=n[0].getAttribute("xyz"),c=new s;f&&(f=f.split(" "),c=new s({x:parseFloat(f[0]),y:parseFloat(f[1]),z:parseFloat(f[2])}));var T=n[0].getAttribute("rpy"),O=new a;if(T){T=T.split(" ");var A=parseFloat(T[0]),L=parseFloat(T[1]),M=parseFloat(T[2]),U=A/2,N=L/2,G=M/2,I=Math.sin(U)*Math.cos(N)*Math.cos(G)-Math.cos(U)*Math.sin(N)*Math.sin(G),Q=Math.cos(U)*Math.sin(N)*Math.cos(G)+Math.sin(U)*Math.cos(N)*Math.sin(G),Y=Math.cos(U)*Math.cos(N)*Math.sin(G)-Math.sin(U)*Math.sin(N)*Math.cos(G),z=Math.cos(U)*Math.cos(N)*Math.cos(G)+Math.sin(U)*Math.sin(N)*Math.sin(G);O=new a({x:I,y:Q,z:Y,w:z}),O.normalize()}this.origin=new p({position:c,orientation:O})}var H=i.getElementsByTagName("geometry");if(H.length>0){for(var k=H[0],q=null,E=0;E<k.childNodes.length;E++){var C=k.childNodes[E];if(C.nodeType===1){q=C;break}}var R=q.nodeName;R==="sphere"?this.geometry=new y({xml:q}):R==="box"?this.geometry=new o({xml:q}):R==="cylinder"?this.geometry=new r({xml:q}):R==="mesh"?this.geometry=new S({xml:q}):console.warn("Unknown geometry type "+R)}var P=i.getElementsByTagName("material");P.length>0&&(this.material=new h({xml:P[0]}))}return $e=d,$e}var et,Yt;function hr(){if(Yt)return et;Yt=1;var p=lr();function s(a){this.name=a.xml.getAttribute("name"),this.visuals=[];for(var r=a.xml.getElementsByTagName("visual"),o=0;o<r.length;o++)this.visuals.push(new p({xml:r[o]}))}return et=s,et}var tt,Ht;function qr(){if(Ht)return tt;Ht=1;var p=at(),s=ee(),a=oe();function r(o){this.name=o.xml.getAttribute("name"),this.type=o.xml.getAttribute("type");var h=o.xml.getElementsByTagName("parent");h.length>0&&(this.parent=h[0].getAttribute("link"));var S=o.xml.getElementsByTagName("child");S.length>0&&(this.child=S[0].getAttribute("link"));var y=o.xml.getElementsByTagName("limit");y.length>0&&(this.minval=parseFloat(y[0].getAttribute("lower")),this.maxval=parseFloat(y[0].getAttribute("upper")));var d=o.xml.getElementsByTagName("origin");if(d.length===0)this.origin=new p;else{var v=d[0].getAttribute("xyz"),i=new s;v&&(v=v.split(" "),i=new s({x:parseFloat(v[0]),y:parseFloat(v[1]),z:parseFloat(v[2])}));var n=d[0].getAttribute("rpy"),f=new a;if(n){n=n.split(" ");var c=parseFloat(n[0]),T=parseFloat(n[1]),O=parseFloat(n[2]),A=c/2,L=T/2,M=O/2,U=Math.sin(A)*Math.cos(L)*Math.cos(M)-Math.cos(A)*Math.sin(L)*Math.sin(M),N=Math.cos(A)*Math.sin(L)*Math.cos(M)+Math.sin(A)*Math.cos(L)*Math.sin(M),G=Math.cos(A)*Math.cos(L)*Math.sin(M)-Math.sin(A)*Math.sin(L)*Math.cos(M),I=Math.cos(A)*Math.cos(L)*Math.cos(M)+Math.sin(A)*Math.sin(L)*Math.sin(M);f=new a({x:U,y:N,z:G,w:I}),f.normalize()}this.origin=new p({position:i,orientation:f})}}return tt=r,tt}var se={},Zt;function Nr(){return Zt||(Zt=1,se.DOMImplementation=window.DOMImplementation,se.XMLSerializer=window.XMLSerializer,se.DOMParser=window.DOMParser),se}var rt,Kt;function Pr(){if(Kt)return rt;Kt=1;var p=ot(),s=hr(),a=qr(),r=Nr().DOMParser;function o(h){h=h||{};var S=h.xml,y=h.string;if(this.materials={},this.links={},this.joints={},y){var d=new r;S=d.parseFromString(y,"text/xml")}var v=S.documentElement;this.name=v.getAttribute("name");for(var i=v.childNodes,n=0;n<i.length;n++){var f=i[n];if(f.tagName==="material"){var c=new p({xml:f});this.materials[c.name]!==void 0?this.materials[c.name].isLink()?this.materials[c.name].assign(c):console.warn("Material "+c.name+"is not unique."):this.materials[c.name]=c}else if(f.tagName==="link"){var T=new s({xml:f});if(this.links[T.name]!==void 0)console.warn("Link "+T.name+" is not unique.");else{for(var O=0;O<T.visuals.length;O++){var A=T.visuals[O].material;A!==null&&A.name&&(this.materials[A.name]!==void 0?T.visuals[O].material=this.materials[A.name]:this.materials[A.name]=A)}this.links[T.name]=T}}else if(f.tagName==="joint"){var L=new a({xml:f});this.joints[L.name]=L}}}return rt=o,rt}var it,$t;function jr(){return $t||($t=1,it=K({UrdfBox:ar(),UrdfColor:or(),UrdfCylinder:ur(),UrdfLink:hr(),UrdfMaterial:ot(),UrdfMesh:cr(),UrdfModel:Pr(),UrdfSphere:fr(),UrdfVisual:lr()},ue())),it}var re=er.ROSLIB||{REVISION:"1.3.0"},ce=K;ce(re,Mr());ce(re,Er());ce(re,Or());ce(re,Cr());ce(re,jr());var Gr=re;const Br=vr(Gr);export{Br as R,Dr as a,vr as g};
